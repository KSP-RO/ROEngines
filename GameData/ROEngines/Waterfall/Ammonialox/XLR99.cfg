@PART[ROE-XLR99]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    ROWaterfall
    {
        // TODO: Use more appropriate template (ammonialox).
        template = waterfall-hydyne-lower-1
        audio = pump-fed-medium-1
        position = 0,0,0.013
        rotation = 0, 0, 0
        scale = 0.56, 0.18, 0.56
        useRelativeScaling = true
        glow = _white

        ExtraTemplate
        {
            template = waterfall-hypergolic-vernier-upper-1
            position = -0.406,0.0325,0.016
            rotation = 0, -4, 5
            scale = 0.4, 0.18, 0.8
        }

        MainPlumeVariant:NEEDS[B9PartSwitch]
        {
            name = XLR99A
            template = waterfall-hydyne-lower-1
            position = 0,0,0.013
            rotation = 0, 0, 0
            scale = 0.95, 0.305, 0.95
            glowRecolor = _white
        }
    }

    @MODULE[ModuleEngineConfigs]:NEEDS[B9PartSwitch]
    {
        @CONFIG:HAS[~name[XLR99-RM-1]],*
        {
            %rowaterfallVariant = XLR99A
        }
    }
}

@PART[ROE-XLR99]:AFTER[zROWaterfall_Post]:NEEDS[Waterfall,B9PartSwitch]
{
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rowaterfallMainPlumeSwitch]]
    {
        @SUBTYPE:HAS[~name[XLR99-RM-1]],*
        {
            @MODULE
            {
                @DATA
                {
                    @TEMPLATE:HAS[#templateName[waterfall-hypergolic-vernier-upper-1]]
                    {
                        @position = -0.406,0.0325,-0.79
                    }
                    @TEMPLATE:HAS[#templateName[waterfall-nozzle-glow-white-1]]
                    {
                        @scale = 0.969,0.3111,1.3542	//manually rescale because it won't automatically for some reason
                    }
                }
            }
        }
    }
}