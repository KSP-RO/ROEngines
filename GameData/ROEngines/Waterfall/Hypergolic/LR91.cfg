@PART[ROE-LR91|ROE-LR91-4V]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    ROWaterfall
    {
        //The glow refuses to rescale with the variant, but this engine has a nice emissive glow baked in anyway so just make the glow really tiny
        name = glowaway
        template = waterfall-hypergolic-aerozine50-lower-1
        audio = pump-fed-heavy-1
        position = 0,0,0.28
        rotation = 0, 0, 0
        scale = 0.01, 0.01, 0.01
        glow = _white

        ExtraTemplate
        {
            template = waterfall-hypergolic-vernier-upper-2
            transform = vernierFX
            position = 0,0,0.05
            rotation = 0, 0, 0
            scale = 1.25, 1.25, 1.25
        }

        MainPlumeVariant:NEEDS[B9PartSwitch]
        {
            name = hypergolic49AR
            template = waterfall-hypergolic-aerozine50-upper-1
            audio = pump-fed-heavy-1
            position = 0,0,0.28
            rotation = 0, 0, 0
            scale = 1.13, 1.13, 1.13
            glowRecolor = _white
        }

        MainPlumeVariant:NEEDS[B9PartSwitch]
        {
            name = hypergolic49ARLong
            template = waterfall-hypergolic-aerozine50-upper-1
            audio = pump-fed-heavy-1
            position = 0,0,0.385
            rotation = 0, 0, 0
            scale = 1.13, 1.13, 1.13
            glowRecolor = _white
        }

        MainPlumeVariant:NEEDS[B9PartSwitch]
        {
            name = kerolox25AR
            template = waterfall-kerolox-upper-3
            position = 0,0,0.26
            rotation = 0, 0, 0
            scale = 1.85, 1.85, 1.85
            glowRecolor = _yellow
        }

        MainPlumeVariant:NEEDS[B9PartSwitch]
        {
            name = kerolox49AR
            template = waterfall-kerolox-upper-3
            position = 0,0,0.295
            rotation = 0, 0, 0
            scale = 2.5, 2.5, 2.5
            glowRecolor = _yellow
        }

        MainPlumeVariant:NEEDS[B9PartSwitch]
        {
            name = kerolox49ARLong
            template = waterfall-kerolox-upper-3
            position = 0,0,0.395
            rotation = 0, 0, 0
            scale = 2.5, 2.5, 2.5
            glowRecolor = _yellow
        }
    }

    @MODULE[ModuleEngineConfigs]:NEEDS[B9PartSwitch]
    {
        @CONFIG,*
        {
            %rowaterfallVariant = hypergolic49AR
        }
        @CONFIG[LR91-AJ-1]
        {
            %rowaterfallVariant = kerolox25AR
        }
        @CONFIG[LR91-AJ-3]
        {
            %rowaterfallVariant = kerolox25AR
        }
        @CONFIG[LR91-AJ-?-Kero*],*
        {
            %rowaterfallVariant = kerolox49AR
        }
        @CONFIG[LR91-AJ-11]
        {
            %rowaterfallVariant = hypergolic49ARLong
        }
        @CONFIG[LR91-AJ-11-Kero]
        {
            %rowaterfallVariant = kerolox49ARLong
        }
        @CONFIG[LR91-AJ-11A]
        {
            %rowaterfallVariant = hypergolic49ARLong
        }
        @CONFIG[LR91-AJ-11A-Kero]
        {
            %rowaterfallVariant = kerolox49ARLong
        }
    }
}
@PART[ROE-LR91-4V]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
	@ROWaterfall
	{
		@position[2] -= 0.18
		@ExtraTemplate,*
		{
			@transform = vernierTransform
		}
		@MainPlumeVariant,*
		{
			@position[2] -= 0.18
		}
	}
}

@PART[ROE-LR91|ROE-LR91-4V]:AFTER[zROWaterfall_Post]:NEEDS[Waterfall,B9PartSwitch]
{
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rowaterfallMainPlumeSwitch]]
    {
        @SUBTYPE[kero*],*
        {
            @MODULE
            {
                @DATA
                {
                    @TEMPLATE:HAS[#templateName[waterfall-hypergolic-vernier-upper-2]]
                    {
                        @templateName = waterfall-kerolox-vernier-2
                        @position = 0,0,0.05
                        @rotation = 0, 0, 0
                        @scale = 2, 2, 2
                    }
                }
            }
        }
    }
}
