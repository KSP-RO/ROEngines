PART
{
	module = Part
	name = ROE-S400
	author = SAM

	ROESetEngineDefaults = LIQUID_ENGINE

	//  ============================================================================
	//	Update Below
	//  ============================================================================

	MODEL
	{
		model = ROEngines/Assets/NicheParts/S400
		scale = 1.0, 1.0, 1.0
	}

	scale = 1.0
	rescaleFactor = 1.0
	node_stack_top = 0.0, 0.22, 0.0, 0.0, 1.0, 0.0, 0
	node_stack_bottom = 0.0, -0.4, 0.0, 0.0, -1.0, 0.0, 0
	// stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,1,1,0,0

	title = 0.4kN Engine (S400)
	manufacturer = Airbus Defence & Space
	description = The S400 400N bipropellant Engine is designed for apogee orbit injection of geostationary satellites and for trajectory and planetary orbit maneuvers of deep space probes. Notable missions include Galileo, Mars Express, Venus Express & the ExoMars Trace Gas Orbiter. [Uses RCS Configuration]

	tags = S400, NicheParts, 400N, Bipropellant

	useRcsConfig = RCSBlockDouble
	RcsNozzles = 1
	useRcsMass = True

	EFFECTS
	{
		running
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.75
				pitch = 1.0 0.95
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustFlame_yellow_tiny_Z
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_medium
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				loop = false
			}
		}
	}

	MODULE
	{
		name = ModuleEnginesRF
		thrustVectorTransformName = thrustTransform
	}

	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = EMIRGB
		dependOnEngineState = True
		responseSpeed = 0.001
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.5
		maxDistance = 30
		falloff = 1.5
		thrustTransformName = thrustTransform
	}
}


// TODO: create a ROE-S400-v2 that ACTUALLY represents S400,
// with correct mass, thrust, Isp, fuel?


// ROE-S400 is weirdly big for its thrust & mass. Deprecate it and replace it by
// a version with more oomph. We assume RO's generic 1.1/2.2kN thrusters are sanely sized.
+PART[ROE-S400]:FIRST
{
	@name = ROE-generic-full
	@title = 1.1/1.78kN Thruster
	@description ^= :^:A thruster for orbital maneuvers. :
	@useRcsConfig = RCSBlock4x
}

@PART[ROE-S400]:FIRST
{
	roeDeprecate = hard
}
@PART[ROE-generic-full]:HAS[@NonRP0]:AFTER[zzzRP-0]
{
	*@PART[ROE-S400]/roeDeprecate = soft
}
